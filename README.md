# 日历应用 - 公历/农历查看器

一个功能丰富的桌面日历应用，支持公历和农历显示、标签管理、提醒功能等。

## 🌟 主要功能

### 📅 日历显示
- **公历显示**：完整的公历日历视图
- **农历支持**：显示农历日期、节气、节日等信息
- **农历信息**：包含生肖、星座、宜忌、冲煞等详细信息
- **年份导航**：支持1900-2100年间的年份切换
- **月份导航**：快速切换月份

### 🏷️ 标签管理
- **添加标签**：为任意日期添加带颜色的标签
- **编辑标签**：修改标签内容和颜色
- **删除标签**：删除不需要的标签
- **标签搜索**：按内容、日期、颜色搜索标签
- **标签列表**：查看所有标签的列表视图

### ⏰ 提醒功能
- **多种重复类型**：
  - 一次性提醒
  - 每天重复
  - 每周重复（指定星期几）
  - 每月重复（指定日期）
  - 每年重复（公历月日）
  - 农历年重复（农历月日）
- **智能提醒**：每分钟检查，不会错过提醒时间
- **提醒弹窗**：到达提醒时间时弹出提醒窗口

### 🤖 AI助手功能
- **多模型支持**：支持配置多个AI模型
- **配置管理**：添加、编辑、删除AI模型配置
- **实时对话**：与AI助手进行实时对话
- **深色主题**：与主应用保持一致的界面风格
- **错误处理**：完整的网络错误和API错误处理

### 🎨 界面特色
- **深色主题**：黑色背景，白色文字，护眼设计
- **自定义标题栏**：无边框窗口，自定义标题栏
- **颜色选择器**：直观的颜色圆点选择，支持6种颜色
- **系统托盘**：最小化到系统托盘，后台运行

## 📦 安装要求

### 必需依赖
```bash
pip install tkinter
```

### 可选依赖（用于农历功能）
```bash
# 方式1：安装lunar-python（推荐）
pip install lunar-python

# 方式2：使用lunar-javascript
# 需要先运行 download_lunar.py 下载lunar.js文件
python download_lunar.py
```

### AI助手依赖
```bash
# 安装requests库用于API调用
pip install requests
```

## 🚀 快速开始

### 1. 下载项目
```bash
git clone <repository-url>
cd calendar
```

### 2. 安装依赖
```bash
pip install lunar-python
```

### 3. 运行应用
```bash
python calendar_app.py
```

### 4. 使用VBS脚本启动（Windows）
双击 `start_calendar.vbs` 文件即可启动应用。

## 📖 使用指南

### 基本操作

#### 导航日历
- **年份切换**：使用年份输入框或左右箭头按钮
- **月份切换**：使用月份输入框或左右箭头按钮
- **返回今天**：点击"今天"按钮快速回到当前日期

#### 添加标签
1. 点击任意日期
2. 在弹出的对话框中输入标签内容
3. 选择标签颜色（点击颜色圆点）
4. 设置提醒（可选）
5. 点击"保存"按钮

#### 设置提醒
1. 在标签编辑窗口中勾选"启用提醒"
2. 设置提醒时间（格式：HH:MM）
3. 选择重复类型：
   - **不重复**：一次性提醒
   - **每天**：每天重复
   - **每周**：选择星期几重复
   - **每月**：选择日期重复
   - **每年(公历)**：按公历月日重复
   - **每年(农历)**：按农历月日重复
4. 点击"保存"按钮

#### 编辑标签
1. 点击已有标签的日期
2. 在弹出的对话框中修改内容
3. 可以修改颜色、提醒设置等
4. 点击"保存"按钮

#### 删除标签
1. 点击标签日期
2. 在弹出的对话框中点击"删除"按钮
3. 确认删除

### 高级功能

#### 查看所有标签
- 点击主界面右上角的"查看所有标签"按钮
- 在标签列表中可以进行搜索、编辑、删除操作

#### 搜索标签
- 在标签列表页面使用搜索功能
- 支持按内容、日期、颜色搜索
- 选择搜索类型后输入关键词

#### 农历信息查看
- 点击日期查看详细的农历信息
- 包含生肖、星座、宜忌、冲煞等信息
- 可以复制农历信息到剪贴板

#### 系统托盘
- 最小化窗口后应用会显示在系统托盘
- 右键托盘图标可以重新显示窗口或退出应用

#### AI助手
- 点击主界面右上角的"AI助手"按钮
- 在配置管理中添加AI模型配置
- 在AI聊天选项卡中与AI助手对话
- 支持多配置管理和默认配置设置

## 🎨 颜色支持

应用支持6种预设颜色：
- 🔵 蓝色 (#1E90FF)
- 🔴 红色 (#FF6347)
- 🟢 绿色 (#32CD32)
- 🟡 黄色 (#FFD700)
- 🟣 紫色 (#9370DB)
- 🩷 粉色 (#FF69B4)

## ⚙️ 配置说明

### 数据库
- 应用使用SQLite数据库存储标签和提醒信息
- 数据库文件：`calendar_data.db`
- 自动创建，无需手动配置

### 提醒设置
- 提醒检查频率：每分钟检查一次
- 时间误差范围：±5分钟
- 提醒窗口：置顶显示，带提示音

### 农历支持
- 优先使用lunar-python库
- 备用方案：lunar-javascript
- 如果都不可用，仅显示公历信息

### AI助手支持
- 支持多种LLM模型配置
- 使用requests库进行API调用
- 完整的错误处理和超时机制

## 🔧 故障排除

### 常见问题

#### 1. 农历信息不显示
```bash
# 安装lunar-python库
pip install lunar-python
```

#### 2. 提醒功能不工作
- 检查应用是否在后台运行
- 确认系统时间是否正确
- 查看控制台是否有错误信息

#### 3. 应用无法启动
- 确认Python版本（建议3.7+）
- 检查tkinter是否可用
- 确认文件权限

#### 4. 重复提醒不触发
- 使用"测试提醒"按钮检查调试信息
- 确认重复类型和重复值设置正确
- 检查数据库中的提醒记录

#### 5. AI助手无法使用
- 确认已安装requests库：`pip install requests`
- 检查AI模型配置是否正确
- 验证API密钥和网络连接
- 查看控制台错误信息

### 调试功能
- 点击"测试提醒"按钮可以手动触发提醒检查
- 查看控制台输出的调试信息
- 检查数据库文件是否正常

## 📁 文件结构

```
calendar/
├── calendar_app.py      # 主应用程序
├── calendar_data.db     # 数据库文件（自动创建）
├── lunar.js            # 农历计算库（可选）
├── download_lunar.py   # 下载lunar.js的脚本
├── start_calendar.vbs  # Windows启动脚本
├── test_llm.py         # LLM功能测试脚本
├── demo_llm.py         # LLM功能演示脚本
├── demo_chat_ui.py     # 聊天界面演示脚本
├── demo_chat_ui_v2.py  # 聊天界面演示脚本 v2.0
├── LLM使用说明.md      # AI助手使用说明
└── README.md          # 项目说明文档
```

## 🛠️ 开发信息

### 技术栈
- **GUI框架**：tkinter
- **数据库**：SQLite
- **农历计算**：lunar-python / lunar-javascript
- **AI助手**：requests / 各种LLM API
- **语言**：Python 3.7+

### 系统要求
- **操作系统**：Windows 10/11, macOS, Linux
- **Python版本**：3.7或更高版本
- **内存**：至少100MB可用内存
- **存储**：至少10MB可用空间

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

### 贡献方式
1. Fork本项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 📞 支持

如果您在使用过程中遇到问题，请：
1. 查看本README的故障排除部分
2. 检查控制台错误信息
3. 提交Issue描述问题

---

**享受使用这个功能丰富的日历应用！** 📅✨ 